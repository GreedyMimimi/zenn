---
title: XRPLã§ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ç™ºè¡Œã™ã‚‹ï¼šTrust Lineï¼†Issuanceãƒãƒ³ã‚ºã‚ªãƒ³
emoji: ğŸ’°
type: tech
topics: [xrpl, token, trust-line, blockchain, javascript]
published: true
---

## ã¯ã˜ã‚ã«

XRP Ledgerã®æœ€å¤§ã®ç‰¹å¾´ã®ä¸€ã¤ãŒã€**ã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆãªã—ã§ã€ãƒˆãƒ¼ã‚¯ãƒ³ï¼ˆç‹¬è‡ªé€šè²¨ï¼‰ã‚’ç™ºè¡Œã§ãã‚‹** ã¨ã„ã†ã“ã¨ã§ã™ã€‚

ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ã®æœ¬æ¥ã®ãƒ“ã‚¸ãƒ§ãƒ³ â€” ã€Œèª°ã‚‚ãŒç‹¬è‡ªã®é€šè²¨ã‚’ç™ºè¡Œã§ãã‚‹ä¸–ç•Œã€ã€‚ãã‚ŒãŒXRPLã§ã¯ç¾å®Ÿã§ã™ã€‚

### ã“ã®è¨˜äº‹ã§å­¦ã¹ã‚‹ã“ã¨

- **Trust Line** ã¨ã¯ä½•ã‹ã€ãªãœå¿…è¦ãªã®ã‹
- ãƒˆãƒ¼ã‚¯ãƒ³ã®ç™ºè¡Œãƒ•ãƒ­ãƒ¼ï¼ˆIssuer â†” Holderï¼‰
- XRP Ledgerã®ãƒˆãƒ¼ã‚¯ãƒ³ä»•æ§˜ï¼ˆç²¾åº¦ã€å°æ•°ç‚¹ã€å‡çµï¼‰
- å®Ÿè£…ã‚³ãƒ¼ãƒ‰ä»˜ããƒãƒ³ã‚ºã‚ªãƒ³
- æ³¨æ„ç‚¹ï¼šCounterparty Riskï¼ˆä¿¡ç”¨ãƒªã‚¹ã‚¯ï¼‰ã®ç†è§£

---

## Trust Lineã£ã¦ãªã«ï¼Ÿ

### ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³åˆå¿ƒè€…å‘ã‘èª¬æ˜

**Trust Line** = ã€Œèª°ã‹ãŒç™ºè¡Œã—ãŸãƒˆãƒ¼ã‚¯ãƒ³ã‚’å—ã‘å–ã‚‹ã“ã¨ã‚’è¨±å¯ã™ã‚‹å›ç·šã€

ã‚¤ãƒ¡ãƒ¼ã‚¸ï¼šéŠ€è¡Œå£åº§ã®ã€Œé™åº¦é¡è¨­å®šã€ã¿ãŸã„ãªã‚‚ã®ã€‚

```
ã‚ãªãŸ  â† Trust Line â† å‹äººï¼ˆIssuerï¼‰
        â†‘ Max 1000 USD â†‘
```

å‹äººãŒã€ŒUSDã€ã¨ã„ã†é€šè²¨ã‚’ç™ºè¡Œã—ã¦ã„ã‚‹å ´åˆã€ã‚ãªãŸãŒã€Œæœ€å¤§1000 USDã¾ã§å—ã‘å–ã‚Šã¾ã™ã€ã¨ã„ã†ä¿¡ç”¨æ ã‚’ä½œã‚‹ã€‚ã“ã‚ŒãŒ **Trust Line** ã§ã™ã€‚

### XRPLã§ã¯ãªãœTrust LineãŒå¿…è¦ã‹ï¼Ÿ

XRPã¨ç•°ãªã‚Šã€**ãƒˆãƒ¼ã‚¯ãƒ³ã¯ã€Œç´”ç²‹ãªä¿¡ç”¨ã€** ã ã‹ã‚‰ã§ã™ã€‚

- XRP = ãƒã‚¤ãƒ†ã‚£ãƒ–è³‡ç”£ï¼ˆãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ã«çµ„ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹ï¼‰
- ãƒˆãƒ¼ã‚¯ãƒ³ = ç™ºè¡Œè€…ã®**IOU**ï¼ˆè² å‚µè¨¼æ›¸ï¼‰

ä¾‹ï¼š
- éŠ€è¡ŒãŒã€Œ1 USD = 1éŠ€è¡Œãƒ‰ãƒ«ã€ã¨ç™ºè¡Œ
- ã‚ãªãŸã¯ãã‚Œã‚’ä¿¡ç”¨ã—ã¦å—ã‘å–ã‚‹
- éŠ€è¡ŒãŒç ´ç”£ã—ãŸã‚‰ï¼Ÿ â†’ å¸³æ¶ˆã—

XRPLã¯ã“ã®ã€Œä¿¡ç”¨é–¢ä¿‚ã€ã‚’æ˜ç¤ºçš„ã«è¨˜éŒ²ã—ã¾ã™ã€‚ãã‚ŒãŒ **Trust Line** ã§ã™ã€‚

---

## ãƒˆãƒ¼ã‚¯ãƒ³ç™ºè¡Œãƒ•ãƒ­ãƒ¼

### Step 1: Issuerï¼ˆç™ºè¡Œè€…ï¼‰ãŒãƒˆãƒ¼ã‚¯ãƒ³ã‚’ã€Œä½œã‚‹ã€

å®Ÿã¯ã€XRPLã§ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä½œæˆã™ã‚‹ **å°‚ç”¨ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã¯ä¸è¦** ã§ã™ã€‚ç™ºè¡Œè€…ãŒãƒˆãƒ¼ã‚¯ãƒ³ã‚’é€é‡‘ã—ã‚ˆã†ã¨ã™ã‚‹æ™‚ç‚¹ã§ã€ãƒˆãƒ¼ã‚¯ãƒ³ãŒè‡ªå‹•çš„ã«ã€Œå­˜åœ¨ã€ã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

```javascript
const issuer = "rN7n7otQDd6FczFgLdSqtcsAUxDkw6fzRH";
const token = {
  currency: "USD",      // 3æ–‡å­—ã‚³ãƒ¼ãƒ‰ï¼ˆã‚«ã‚¹ã‚¿ãƒ ï¼‰
  issuer: issuer
};
```

### Step 2: Holderï¼ˆå—å–äººï¼‰ãŒTrust Lineã‚’è¨­å®š

å—å–äººã¯ã€ç™ºè¡Œè€…ã®ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å—ã‘å–ã‚‹å‰ã«ã€**Trust Lineã‚’é–‹ã** å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```javascript
const trustSetTx = {
  Account: holder,
  TransactionType: "TrustSet",
  LimitAmount: {
    currency: "USD",
    issuer: issuer,
    value: "1000"        // æœ€å¤§1000 USDã¾ã§å—ã‘å–ã‚‹
  },
  Fee: "12"
};
```

### Step 3: Issuer ãŒ Holder ã«ãƒˆãƒ¼ã‚¯ãƒ³ã‚’é€é‡‘

Trust LineãŒè¨­å®šã•ã‚ŒãŸã‚‰ã€ç™ºè¡Œè€…ã¯è‡ªç”±ã«é€é‡‘ã§ãã¾ã™ã€‚

```javascript
const paymentTx = {
  Account: issuer,
  Destination: holder,
  Amount: {
    currency: "USD",
    issuer: issuer,
    value: "100"         // 100 USD ã‚’é€é‡‘
  },
  Fee: "12"
};
```

---

## å®Ÿè£…ã‚³ãƒ¼ãƒ‰ï¼šãƒˆãƒ¼ã‚¯ãƒ³ç™ºè¡Œãƒ»é€é‡‘

### ç’°å¢ƒæ§‹ç¯‰

```bash
npm install xrpl
```

### å®Œå…¨ãªãƒãƒ³ã‚ºã‚ªãƒ³ã‚³ãƒ¼ãƒ‰

```javascript
const xrpl = require("xrpl");

async function demonstrateTokenFlow() {
  // Testnet ã«æ¥ç¶š
  const client = new xrpl.Client("wss://s.altnet.rippletest.net:51233");
  await client.connect();

  // Step 1: ãƒ†ã‚¹ãƒˆã‚¢ã‚«ã‚¦ãƒ³ãƒˆç”Ÿæˆ
  const issuer = await generateTestAccount(client);
  const holder = await generateTestAccount(client);

  console.log(`Issuer: ${issuer.address}`);
  console.log(`Holder: ${holder.address}`);

  // Step 2: Holder ãŒ Trust Line ã‚’è¨­å®š
  await setupTrustLine(client, holder, issuer.address);

  // Step 3: Issuer ãŒãƒˆãƒ¼ã‚¯ãƒ³ã‚’é€é‡‘
  await sendToken(client, issuer, holder.address);

  // Step 4: æ®‹é«˜ç¢ºèª
  await checkBalance(client, holder.address);

  await client.disconnect();
}

async function generateTestAccount(client) {
  const wallet = xrpl.Wallet.generate();
  
  // Testnet ã‹ã‚‰ XRP ã‚’ã‚‚ã‚‰ã†
  const fundResult = await client.fundAccount({
    address: wallet.address
  });
  
  console.log(`Funded ${wallet.address}`);
  return wallet;
}

async function setupTrustLine(client, holder, issuerAddress) {
  const trustSetTx = {
    Account: holder.address,
    TransactionType: "TrustSet",
    LimitAmount: {
      currency: "USD",
      issuer: issuerAddress,
      value: "10000"      // æœ€å¤§10000 USD ã¾ã§
    }
  };

  const submittedTx = await client.submitAndWait(trustSetTx, {
    wallet: holder
  });

  console.log(`Trust Line established: ${submittedTx.result.hash}`);
}

async function sendToken(client, issuer, holderAddress) {
  const paymentTx = {
    Account: issuer.address,
    Destination: holderAddress,
    Amount: {
      currency: "USD",
      issuer: issuer.address,
      value: "500"        // 500 USD ã‚’é€é‡‘
    }
  };

  const submittedTx = await client.submitAndWait(paymentTx, {
    wallet: issuer
  });

  console.log(`Token sent: ${submittedTx.result.hash}`);
}

async function checkBalance(client, address) {
  const accountInfo = await client.request({
    command: "account_lines",
    account: address,
    ledger_index: "validated"
  });

  console.log(`\n${address} Balances:`);
  for (const line of accountInfo.result.lines) {
    console.log(`- ${line.currency} (${line.account}): ${line.balance}`);
  }
}

// å®Ÿè¡Œ
demonstrateTokenFlow().catch(console.error);
```

### å®Ÿè¡Œçµæœ

```
Issuer: rN7n7otQDd6FczFgLdSqtcsAUxDkw6fzRH
Holder: rU6K7V3Po4snVhBBaU29sesqs2qTQJWDw1
Funded rN7n7otQDd6FczFgLdSqtcsAUxDkw6fzRH
Funded rU6K7V3Po4snVhBBaU29sesqs2qTQJWDw1
Trust Line established: ABC123...
Token sent: DEF456...

rU6K7V3Po4snVhBBaU29sesqs2qTQJWDw1 Balances:
- USD (rN7n7otQDd6FczFgLdSqtcsAUxDkw6fzRH): 500
```

---

## ãƒˆãƒ¼ã‚¯ãƒ³ã®ä»•æ§˜ï¼šç´°ã‹ã„ãƒ«ãƒ¼ãƒ«

### é€šè²¨ã‚³ãƒ¼ãƒ‰ï¼ˆCurrency Codeï¼‰

3æ–‡å­—ã‚³ãƒ¼ãƒ‰ï¼ˆä¾‹: `USD`, `EUR`, `JPY`ï¼‰ã€ã¾ãŸã¯160ãƒ“ãƒƒãƒˆ16é€²æ•°ï¼ˆã‚«ã‚¹ã‚¿ãƒ ï¼‰ã‚’ä½¿ç”¨ã€‚

```javascript
{
  currency: "USD",           // æ¨™æº–ã‚³ãƒ¼ãƒ‰
  issuer: "rN7n..."
}

// OR

{
  currency: "015841551A748AD2C1F76FF6ECB0BACF1000000000000000000000000",
  issuer: "rN7n..."
}
```

### ç²¾åº¦ï¼ˆPrecisionï¼‰

ãƒˆãƒ¼ã‚¯ãƒ³ã¯æœ€å¤§16æ¡ã®ç²¾åº¦ã‚’ã‚µãƒãƒ¼ãƒˆã€‚**å°æ•°ç‚¹ã¯å‹•çš„** ã§ã™ã€‚

```javascript
{
  value: "123.456789",       // å°æ•°ç‚¹ã§æŒ‡å®š
  currency: "USD"
}
```

### å‡çµï¼ˆFreezingï¼‰

ç™ºè¡Œè€…ã¯ã€ç‰¹å®šã®ãƒ›ãƒ«ãƒ€ãƒ¼ã®ãƒˆãƒ¼ã‚¯ãƒ³ä¿æœ‰ã‚’å‡çµã§ãã¾ã™ï¼ˆCounterparty Risk ã¸ã®å¯¾æŠ—æ‰‹æ®µï¼‰ã€‚

```javascript
const freezeTx = {
  Account: issuer.address,
  TransactionType: "TrustSet",
  LimitAmount: {
    currency: "USD",
    issuer: issuer.address,
    value: "0"             // å‡çµï¼ˆåˆ¶é™ï¼‰
  },
  QualityIn: 0,
  QualityOut: 0
};
```

---

## å®Ÿè£…æ™‚ã®æ³¨æ„ç‚¹

### 1. Reserveï¼ˆãƒªã‚¶ãƒ¼ãƒ–ï¼‰ã‚’è€ƒæ…®ã™ã‚‹

Trust Line ã‚’ä½œæˆã™ã‚‹ã¨ã€ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ãƒªã‚¶ãƒ¼ãƒ–ãŒå¢—ãˆã¾ã™ï¼ˆæœ€æ–°ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã§ã¯ç´„2 XRP/è¡Œï¼‰ã€‚

```javascript
// Trust Line ãŒå¢—ãˆã‚‹ãŸã³ã« Reserve ãŒå¢—åŠ 
Reserve = BaseReserve + (OwnerCount * IncrementReserve)
```

### 2. Counterparty Riskï¼ˆä¿¡ç”¨ãƒªã‚¹ã‚¯ï¼‰

ãƒˆãƒ¼ã‚¯ãƒ³ã¯ãŸã ã®IOUãªã®ã§ã€**ç™ºè¡Œè€…ãŒç ´ç”£ã—ãŸã‚‰ä¾¡å€¤ãŒã‚¼ãƒ­** ã«ãªã‚Šã¾ã™ã€‚

```
100 USD ä¿æœ‰ â† Issuer ãŒç ´ç”£ â†’ 0 USD
```

XRPLã§ãƒˆãƒ¼ã‚¯ãƒ³ã‚’é¸ã¶ã¨ãã¯ã€**ç™ºè¡Œè€…ã‚’ä¿¡ç”¨ã§ãã‚‹ã‹** ã‚’å¿…ãšç¢ºèªã—ã¦ãã ã•ã„ã€‚

### 3. Decimalç²¾åº¦

è¨ˆç®—ã®ã‚ºãƒ¬ã‚’é¿ã‘ã‚‹ãŸã‚ã€**æ–‡å­—åˆ—ã§å€¤ã‚’æ‰±ã†**ï¼š

```javascript
// âŒ æ‚ªã„ä¾‹
value: 100.50

// âœ… è‰¯ã„ä¾‹
value: "100.50"
```

---

## ã‚ˆãã‚ã‚‹è³ªå•

### Q: ãªãœXRPã§ã¯ãªããƒˆãƒ¼ã‚¯ãƒ³ã‚’ç™ºè¡Œã™ã‚‹ã®ã‹ï¼Ÿ

A: 
- å¤šé€šè²¨å¯¾å¿œï¼ˆå„å›½ã®æ³•å®šé€šè²¨ã‚’ã‚ªãƒ³ãƒã‚§ãƒ¼ãƒ³åŒ–ï¼‰
- ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆé€šè²¨ã®ç™ºè¡Œï¼ˆä¼æ¥­ãŒç‹¬è‡ªãƒˆãƒ¼ã‚¯ãƒ³ï¼‰
- ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«ã‚³ã‚¤ãƒ³ï¼ˆæ³•å®šé€šè²¨ã«é€£å‹•ï¼‰

### Q: Trust Line ã‚’å‰Šé™¤ã§ãã‚‹ã‹ï¼Ÿ

A: ã¯ã„ã€‚`value: "0"` ã§åˆ¶é™ã™ã‚Œã°ã€æœ¬è³ªçš„ã«ãã®ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å—ã‘å–ã‚Œãªããªã‚Šã¾ã™ã€‚

```javascript
{
  LimitAmount: {
    value: "0"   // Trust Line ã‚’å‰Šé™¤
  }
}
```

### Q: ãƒˆãƒ¼ã‚¯ãƒ³ã®ç™ºè¡Œä¸Šé™ã¯ã‚ã‚‹ã‹ï¼Ÿ

A: XRPLãƒ—ãƒ­ãƒˆã‚³ãƒ«çš„ã«ã¯ä¸Šé™ãªã—ã€‚ãŸã ã—ã€**ç™ºè¡Œè€…ã®ä¿¡ç”¨åŠ›ã«ä¾å­˜** ã—ã¾ã™ã€‚

---

## ã¾ã¨ã‚

- **Trust Line** = ãƒˆãƒ¼ã‚¯ãƒ³å—å–ã®ä¿¡ç”¨æ 
- **Token Issuance** = ç™ºè¡Œè€…ãŒãƒˆãƒ¼ã‚¯ãƒ³ã‚’é€é‡‘ã™ã‚‹ã ã‘ã§ã€è‡ªå‹•çš„ã«ã€Œå­˜åœ¨ã€
- Counterparty Riskï¼ˆç™ºè¡Œè€…ã¸ã®ä¿¡ç”¨ï¼‰ãŒé‡è¦
- ãƒ‡ã‚¸ã‚¿ãƒ«é‡‘èã®æœ¬è³ªï¼š**ä¿¡ç”¨ã‚’ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã™ã‚‹**

XRPLã§ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ç™ºè¡Œã™ã‚‹ã“ã¨ã§ã€é‡‘èã‚·ã‚¹ãƒ†ãƒ ã®æœ¬è³ªã‚’ç†è§£ã§ãã¾ã™ã€‚

---

## å‚è€ƒãƒªãƒ³ã‚¯

- [XRP Ledger Docs - TrustSet](https://xrpl.org/trustset.html)
- [XRP Ledger Docs - Payment](https://xrpl.org/payment.html)
- [xrpl.js - ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://js.xrpl.org/)
- [Ripple Test Network Faucet](https://faucet.altnet.rippletest.net/)

---

**æ¬¡ã¯ï¼Ÿ** Escrow ã®æ¬¡ã¯ã€DEXï¼ˆåˆ†æ•£å‹äº¤æ›æ‰€ï¼‰ã§ãƒˆãƒ¼ã‚¯ãƒ³å–å¼•ã‚’è©¦ã™ã‹ã€ãƒšã‚¤ãƒ¡ãƒ³ãƒˆãƒãƒ£ãƒãƒ«ã§é«˜é€Ÿé€é‡‘ã‚’ä½“é¨“ã—ã¦ã¿ã¦ãã ã•ã„ã€‚